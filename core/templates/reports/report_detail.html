{% extends 'base.html' %}

{% block content %}
<div class="container mt-4">
    <h2>Report Details</h2>
    <p><strong>Status:</strong> {{ general_info.status }}</p>
    <p><strong>Created At:</strong> {{ general_info.created_at }}</p>
    <p><strong>Submitted At:</strong> {{ general_info.submitted_at }}</p>

    <!-- Shop Section -->
    <div class="card mb-4">
        <div class="card-header bg-primary text-white">Shop Details</div>
        <div class="card-body">
            <p><strong>Shop:</strong> {{ shop_details.shop.name }}</p>
            <p><strong>Product:</strong> {{ shop_details.product.name }}</p>
            <p><strong>Current Quantity:</strong> {{ shop_details.current_quantity }}</p>
            <p><strong>Needs Top-up:</strong> {{ shop_details.needs_topup }}</p>
            <p><strong>Desired Quantity:</strong> {{ shop_details.desired_quantity }}</p>
            <p><strong>Top-up Quantity:</strong> {{ shop_details.topup_quantity }}</p>
            {% if shop_details.photo %}
                <p><strong>Photo:</strong> <img src="{{ shop_details.photo.url }}" alt="Shop Photo" class="img-fluid"></p>
            {% endif %}
            <p><strong>Comments:</strong> {{ shop_details.comments }}</p>
        </div>
    </div>
    
    <!-- Shop-Stores Section -->
        <div class="card mb-4">
            <div class="card-header bg-success text-white">Shop-Stores Details</div>
            <div class="card-body">
                <p><strong>Status of shop-stores Quantity:</strong> {{ shop_store_details.current_quantity }}</p>
                <p><strong>Has sufficient stock?:</strong> {{ shop_store_details.has_sufficient_stock }}</p>
                <p><strong>Quantity Taken to replenish shop:</strong> {{ shop_store_details.quantity_taken }}</p>
                <p><strong>Remaining shop-stores Quantity:</strong> {{ shop_store_details.remaining_quantity }}</p>
                <p><strong>Final shop shelf Quantity:</strong> {{ shop_store_details.final_shop_qauntity }}</p>
                {% if shop_store_details.photo %}
                    <p><strong>Photo Shop-stores shelf:</strong> <img src="{{ shop_store_details.photo.url }}" alt="Shop Store Photo" class="img-fluid"></p>
                {% endif %}

                {% if shop_store_details.shop_update_photo %}
                    <p><strong>Shop shelf if updated :</strong> <img src="{{ shop_store_details.shop_update_photo.url }}" alt="Shop if Photo" class="img-fluid"></p>
                {% endif %}
                
                <p><strong>Comments:</strong> {{ shop_store_details.comments }}</p>
            </div>
        </div>
        </div>
    </div>
     

    <!-- Main Store Section -->
     <div class="card mb-4">
         <div class="card-header bg-danger text-white">Main Store Details</div>
         <div class="card-body">
             <p><strong>Main Store:</strong> {{ main_store_details.name }}</p>
             <p><strong>Current Quantity:</strong> {{ main_store_details.current_quantity }}</p>
             <p><strong>Quantity Taken:</strong> {{ main_store_details.quantity_taken }}</p>
             <p><strong>Remaining Quantity:</strong> {{ main_store_details.remaining_quantity }}</p>
             {% if main_store_details.photo %}
                 <p><strong>Photo:</strong> <img src="{{ main_store_details.photo.url }}" alt="Main Store Photo" class="img-fluid"></p>
             {% endif %}
             <p><strong>Comments:</strong> {{ main_store_details.comments }}</p>
         </div>
     </div>

         <!-- Final Quantities Section -->
     <div class="card mb-4">
         <div class="card-header bg-warning text-white">
             <h5 class="mb-0">Final Quantities</h5>
         </div>
         <div class="card-body">
             <div class="row">
                 <div class="col-md-6">
                     <div class="mb-3">
                         <label class="fw-bold">Final Shop Quantity:</label>
                         <div class="border rounded p-2 bg-light">
                             {{ general_info.final_shop_quantity|default:"0" }}
                         </div>
                     </div>
                 </div>
                 <div class="col-md-6">
                     <div class="mb-3">
                         <label class="fw-bold">Final Store Quantity:</label>
                         <div class="border rounded p-2 bg-light">
                             {{ general_info.final_store_quantity|default:"0" }}
                         </div>
                     </div>
                 </div>
             </div>
             {% if report.needs_topup %}
             <div class="alert alert-info mt-3">
                 <i class="bi bi-info-circle"></i>
                 Top-up was required for this report
             </div>
             {% endif %}
         </div>
     </div>


        <!-- Logout Button -->
        <div class="mt-4">
            <form action="{% url 'reptrack_trace:home' %}" method="post">
                {% csrf_token %}
                <button type="submit" class="btn btn-danger w-100">
                    <i class="bi bi-box-arrow-right me-2"></i>
                    back to dashboard
                </button>
            </form>
{% endblock %}
